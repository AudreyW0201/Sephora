<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Results | Sephora</title>
  <meta name="description" content="Chapter 5 Results | Sephora" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Results | Sephora" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Results | Sephora" />
  
  
  

<meta name="author" content="Zhiyi Guo, Fan Wu, Yujie Wang" />


<meta name="date" content="2019-12-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="missing-values.html"/>
<link rel="next" href="interactive-component.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sephora</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.0.1" data-path="results.html"><a href="results.html#popularity"><i class="fa fa-check"></i><b>5.0.1</b> Popularity</a></li>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#price"><i class="fa fa-check"></i><b>5.1</b> Price</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#composition-of-products"><i class="fa fa-check"></i><b>5.2</b> Composition of Products</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sephora</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Results</h1>
<p>Our focus in this project would be to investigate the factors that contribute to good ratings of a brand, which will be represented by the average ratings of its products. Given our data, we believe two major components will influence the ratings of a brand: its popularity and the composition of its products. Again, we will use total number of reviews and Loves for each brand, i.e., the sum of these statistics of all the brand’s products.</p>
<p>We suspect that low popularity could result in bias in ratings caused by extreme ratings, given our metric of performance is average ratings of all products within a brand. However, there exist factors that could influence the popularity of brands, too; for example, brands carrying relatively affordable products could be more popular than brands carrying relatively expensive products as more people could afford cheaper products. Price itself could affect ratings as well: customers might expect expensive products to achieve more than affordable products as they are paying more. Given similar items, more affordable products might have higher ratings. We also suspect that certain categories of products tend to have higher ratings than other categories of products. Therefore, brands with top-selling products which fall in higher-rating categories might have higher ratings than other brands that don’t. We will illustrate these relationships using different graphs and plots.</p>
<p>We will use the average ratings of each products within a brand as a measure of performance for each brand. Below is a list of 30 top-rated brands Sephora carries:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">ggplot</span>(brand[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>,], <span class="kw">aes</span>(<span class="dt">x =</span> avg_rating, <span class="dt">y =</span> <span class="kw">fct_reorder</span>(Brands, avg_rating))) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Top 30 Brands&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Average Ratings&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Top 30 Rated Brands in Sephora&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb5-7" data-line-number="7">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">        <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>),</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>),</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">        <span class="dt">axis.title.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>),</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">        <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>),</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb5-16" data-line-number="16">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>))</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-7-1.png" width="672" />
We will use these brands as examples to analyze the reasons behind high ratings.</p>
<div id="popularity" class="section level3">
<h3><span class="header-section-number">5.0.1</span> Popularity</h3>
<p>We believe popularity could be a factor of high ratings. The first thing we wanted to do is to eliminate brands with high ratings but very limited number of products. Brands with very few products could have biased ratings as it is easily influenced by extreme values.</p>
<p>Below is brands with ratings above 4.5 but with less than 4 products.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">ggplot</span>(brand_num, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(Brands, freq), <span class="dt">y =</span> freq)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">fill =</span> <span class="st">&quot;#D55E00&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Brands&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">        <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb6-8" data-line-number="8">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb6-9" data-line-number="9">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb6-10" data-line-number="10">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb6-11" data-line-number="11">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Brands with Average Ratings above 4.5 and </span><span class="ch">\n</span><span class="st">with Less than 4 Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-8-1.png" width="672" />
Refer back to the list of top 30 rated brands, “Issey Miyake” only has one product listed on Sephora, meaning the ratings of this product will be the ratings for the brand. We could rule the reason of top ratings for “Issey Miyake” is that it has too few samples of products for us to evaluate the performance of the brand as a whole. The same argument could go for brand “Sand and Sky”, too.</p>
<p>Now, could we get the same results with brands with more products? Since the maximum number of products a brand could have 12, it doesn’t make sense to simly use number of products to judge if a brand has enough information(but we could use number of products to see if a brand doesn’t have enough information).</p>
<p>Therefore, we turn to number of total reviews and total Loves as a measure of popularity: do most popular brands have highest ratings of all?</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">l =</span> <span class="dv">50</span>, <span class="dt">r =</span> <span class="dv">50</span>, <span class="dt">b =</span> <span class="dv">100</span>, <span class="dt">t =</span> <span class="dv">100</span>, <span class="dt">pad =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">t &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw">plot_ly</span>(brand[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>,], <span class="dt">x =</span> <span class="op">~</span>sum_review, <span class="dt">y =</span> <span class="op">~</span>avg_rating, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;#0072B2&quot;</span>), <span class="dt">text =</span> <span class="op">~</span>Brands, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw">add_markers</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw">layout</span>(<span class="dt">title=</span><span class="st">&quot;Top 30 Average Rated Brands in Sephora v.s. Total Number of Product Reviews&quot;</span>, <span class="dt">font =</span> t, <span class="dt">margin =</span> m, <span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Total Number of Product Reviews&#39;</span>), <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Average Ratings&#39;</span>))</a></code></pre></div>
<p><div id="htmlwidget-a643dc110400836dbe5c" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a643dc110400836dbe5c">{"x":{"visdat":{"2769f363437":["function () ","plotlyVisDat"]},"cur_data":"2769f363437","attrs":{"2769f363437":{"x":{},"y":{},"text":{},"hoverinfo":"text","color":["#0072B2"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","inherit":true}},"layout":{"margin":{"b":100,"l":50,"t":100,"r":50,"pad":4},"title":"Top 30 Average Rated Brands in Sephora v.s. Total Number of Product Reviews","font":{"size":13},"xaxis":{"domain":[0,1],"automargin":true,"title":"Total Number of Product Reviews"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Ratings"},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[768,1,131,105,41,82,21,642,132,2081,153,572,6585,14,9,748,456,1175,1800,1268,362,8166,2014,2006,813,495,283,49,314,1423],"y":[5,5,4.89312977099237,4.88571428571429,4.84146341463415,4.81707317073171,4.80952380952381,4.73364485981308,4.71969696969697,4.65785679961557,4.65686274509804,4.64510489510489,4.64381169324222,4.64285714285714,4.61111111111111,4.5548128342246,4.53728070175439,4.53446808510638,4.52555555555556,4.50315457413249,4.50276243093923,4.50269409747735,4.50173783515392,4.50149551345962,4.50061500615006,4.5,4.5,4.5,4.5,4.5],"text":["Aether Beauty","Issey Miyake","Valentino","YUNI","Golde","RODIN olio lusso ","Proraso","The 7 Virtues","Tower 28 Beauty","CHANEL","BERDOUES","The Art of Shaving","Shiseido","ReFa","WelleCo","shu uemura","DOMINIQUE COSMETICS","BVLGARI","BURBERRY","Violet Voss","Kilian","belif","Alpha-H","Makeup Eraser","Sand & Sky","BALENCIAGA","Cocofloss","Crushed Tonic","Diamancel","Evian"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","mode":"markers","marker":{"color":"rgba(0,114,178,1)","line":{"color":"rgba(0,114,178,1)"}},"textfont":{"color":"rgba(0,114,178,1)"},"error_y":{"color":"rgba(0,114,178,1)"},"error_x":{"color":"rgba(0,114,178,1)"},"line":{"color":"rgba(0,114,178,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
As illustrated by the graph, brands with small number of reviews(&lt; 2,000) have a wide range of ratings; however, brands with most number of reviews all have ratings below 4.7, e.g., Shiseido with around 6,500 total reviews but a rating of around 4.65, and belif with over 8,000 total reviews but a rating slightly over 4.5. It is safe to say most popular brands don’t seem to be the best in ratings.</p>
<p>It is also obvious that there is no brand that has high ratings and high number of reviews. All best rated brands, say ratings above 4.8, have very few reviews around or below 500. We could say with some confidence that popularity, or in this case, non-popularity could be a reason for high ratings.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">l =</span> <span class="dv">50</span>, <span class="dt">r =</span> <span class="dv">50</span>, <span class="dt">b =</span> <span class="dv">100</span>, <span class="dt">t =</span> <span class="dv">100</span>, <span class="dt">pad =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">t &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">size =</span> <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">plot_ly</span>(brand[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>,], <span class="dt">x =</span> <span class="op">~</span>sum_love<span class="op">/</span><span class="dv">1000</span>, <span class="dt">y =</span> <span class="op">~</span>avg_rating, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;#009E73&quot;</span>), <span class="dt">text =</span> <span class="op">~</span>Brands, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">add_markers</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw">layout</span>(<span class="dt">title =</span> <span class="st">&quot;Top 30 Average Rated Brands in Sephora v.s. Total Number of Product Loves&quot;</span>, <span class="dt">font =</span> t, <span class="dt">margin =</span> m, <span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Total Number of Product Loves in Thousands&#39;</span>), <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Average Ratings&#39;</span>))</a></code></pre></div>
<p><div id="htmlwidget-e906bcd5cf528ea1fd97" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e906bcd5cf528ea1fd97">{"x":{"visdat":{"276931d5d9ee":["function () ","plotlyVisDat"]},"cur_data":"276931d5d9ee","attrs":{"276931d5d9ee":{"x":{},"y":{},"text":{},"hoverinfo":"text","color":["#009E73"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","inherit":true}},"layout":{"margin":{"b":100,"l":50,"t":100,"r":50,"pad":4},"title":"Top 30 Average Rated Brands in Sephora v.s. Total Number of Product Loves","font":{"size":13},"xaxis":{"domain":[0,1],"automargin":true,"title":"Total Number of Product Loves in Thousands"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Ratings"},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[56.38,0.627,7.012,11.637,2.67,5.542,1.891,32.014,25.169,305.467,13.918,14.09,353.504,4.22,2.272,14.265,48.993,55.241,92.997,280.081,33.539,438.982,33.807,80.513,43.843,16.58,18.81,2.588,7.481,49.361],"y":[5,5,4.89312977099237,4.88571428571429,4.84146341463415,4.81707317073171,4.80952380952381,4.73364485981308,4.71969696969697,4.65785679961557,4.65686274509804,4.64510489510489,4.64381169324222,4.64285714285714,4.61111111111111,4.5548128342246,4.53728070175439,4.53446808510638,4.52555555555556,4.50315457413249,4.50276243093923,4.50269409747735,4.50173783515392,4.50149551345962,4.50061500615006,4.5,4.5,4.5,4.5,4.5],"text":["Aether Beauty","Issey Miyake","Valentino","YUNI","Golde","RODIN olio lusso ","Proraso","The 7 Virtues","Tower 28 Beauty","CHANEL","BERDOUES","The Art of Shaving","Shiseido","ReFa","WelleCo","shu uemura","DOMINIQUE COSMETICS","BVLGARI","BURBERRY","Violet Voss","Kilian","belif","Alpha-H","Makeup Eraser","Sand & Sky","BALENCIAGA","Cocofloss","Crushed Tonic","Diamancel","Evian"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","mode":"markers","marker":{"color":"rgba(0,158,115,1)","line":{"color":"rgba(0,158,115,1)"}},"textfont":{"color":"rgba(0,158,115,1)"},"error_y":{"color":"rgba(0,158,115,1)"},"error_x":{"color":"rgba(0,158,115,1)"},"line":{"color":"rgba(0,158,115,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
The same conclusion could be drawn using total of Loves as measure of popularity too: brands with most number of Loves have no ratings above 4.7, and best rated brands all have toal number of Loves well below 50,000.</p>
<p>We could use brands with highest popularies, or with highest number of reviews and Loves, as a ceiling to other brands: if a brand could have a good amount of reviews and loves, but could also have a rating close to 5, breaking the ceiling, then the brand must be truly amazing.</p>
<p>Here is a parallel coordinate graph with all brands, including their ratings, total number of reivews, and total number of loves.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">brand1 &lt;-<span class="st"> </span>brand</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">coln &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Brands&quot;</span>, <span class="st">&quot;Average Price&quot;</span>, <span class="st">&quot;Number of Products&quot;</span>, <span class="st">&quot;Ratings&quot;</span>, <span class="st">&quot;Total Number of Reviews&quot;</span>, <span class="st">&quot;Total Number of Loves&quot;</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">colnames</span>(brand1) &lt;-<span class="st"> </span>coln</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">brand1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Ratings<span class="op">!=</span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="st">&quot;Ratings&quot;</span>, <span class="st">&quot;Total Number of Reviews&quot;</span>, <span class="st">&quot;Total Number of Loves&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span>parcoords<span class="op">::</span><span class="kw">parcoords</span>(<span class="dt">rownames =</span> F, <span class="dt">brushMode =</span> <span class="st">&quot;1D-axes&quot;</span>, <span class="dt">reorderable =</span> T, <span class="dt">queue =</span> T, <span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">width =</span> <span class="dv">800</span>)</a></code></pre></div>
<p><div class="parcoords html-widget" height="480" id="htmlwidget-2258fbeae1c804f3fc6f" style="width:800px;height:480px; position:relative; overflow-x:auto; overflow-y:hidden; max-width:100%;" width="800"></div>
<script type="application/json" data-for="htmlwidget-2258fbeae1c804f3fc6f">{"x":{"data":{"names":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251"],"Ratings":[5,5,4.89312977099237,4.88571428571429,4.84146341463415,4.81707317073171,4.80952380952381,4.73364485981308,4.71969696969697,4.65785679961557,4.65686274509804,4.64510489510489,4.64381169324222,4.64285714285714,4.61111111111111,4.5548128342246,4.53728070175439,4.53446808510638,4.52555555555556,4.50315457413249,4.50276243093923,4.50269409747735,4.50173783515392,4.50149551345962,4.50061500615006,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.5,4.496199032481,4.49209302325581,4.49029609355561,4.4875,4.48720052510666,4.48696124592539,4.48347639484979,4.48206154615962,4.48137626262626,4.48124471682164,4.48104956268222,4.48094548962856,4.47653429602888,4.47465574047478,4.46882690730107,4.46875,4.46645920714382,4.46613300492611,4.46259599697585,4.4602295283121,4.45815702867889,4.45490892936473,4.45389681668496,4.45064377682403,4.44844933098226,4.44551282051282,4.44476650563607,4.44278306577639,4.44040084388186,4.43968095712861,4.43833943833944,4.43150684931507,4.42753623188406,4.42597300997457,4.42077387082536,4.41964285714286,4.41911764705882,4.41614349775785,4.41335978835979,4.4031117397454,4.40303221730891,4.40195402298851,4.40123456790123,4.40018783599974,4.40015954529591,4.39843882572544,4.3984216230863,4.39764705882353,4.39658634538153,4.39611168208291,4.3944530046225,4.39185750636132,4.38898756660746,4.38865271419228,4.38210564796198,4.37735849056604,4.37692307692308,4.37401257861635,4.37318413820181,4.37213467048711,4.37149355572403,4.36479099678457,4.36170212765957,4.35434983803795,4.35365853658537,4.34801587301587,4.34750070601525,4.34612490594432,4.34375,4.34187553733219,4.34051172707889,4.33373963920039,4.33215114779469,4.33098230315465,4.32756819181698,4.32670454545455,4.32552083333333,4.32430555555556,4.31993006993007,4.31975367124585,4.31888068880689,4.31276724298197,4.31013491280026,4.30872913992298,4.30785340314136,4.30346106304079,4.30248447204969,4.30056653809065,4.2914364640884,4.28054180776244,4.27448082181657,4.26859308384652,4.2664877757901,4.2660128102482,4.26185556085413,4.25870786516854,4.25856766256591,4.25581395348837,4.25449708639473,4.25128205128205,4.25023277467412,4.24116719242902,4.23928571428571,4.2372392974753,4.23702485380117,4.23529411764706,4.23518133367997,4.2245925149618,4.2209932380995,4.22060314242271,4.21782178217822,4.21641993752547,4.21330275229358,4.21200797209766,4.20847209271347,4.20801393728223,4.20466321243523,4.20348374827109,4.20314341846758,4.20224719101124,4.1966515323496,4.19546436285097,4.19443197126179,4.1944177093359,4.18947368421053,4.1891064871481,4.18666666666667,4.1866220735786,4.17839438171303,4.17763157894737,4.17676767676768,4.17326732673267,4.16941138105332,4.16015625,4.15382706623401,4.15134099616858,4.15067819933163,4.14797136038186,4.14757160647572,4.14093484419263,4.13911817998792,4.13888888888889,4.13751831949194,4.13508771929825,4.13106484235574,4.1301120083355,4.12884160756501,4.11325028312571,4.10718492343934,4.10031595576619,4.09978118161926,4.0970688998858,4.09690476190476,4.09615384615385,4.09214186369958,4.09192439862543,4.09133993968117,4.08748852860202,4.08731182795699,4.07987987987988,4.07515881913303,4.0728993344426,4.07052297939778,4.05272124505019,4.04664179104478,4.04365079365079,4.04171083315667,4.03766233766234,4.03383458646617,4.02625952158225,4.02545195052331,4.02384615384615,4.02016985138004,4.01887810140237,4.01574468085106,4.01429848078642,4.01132852729145,4,4,3.9996261682243,3.99596022374145,3.9918076819769,3.98809523809524,3.98790035587189,3.98312883435583,3.97905759162304,3.97226074895978,3.96724890829694,3.96396396396396,3.9481981981982,3.9250598216228,3.91104933981932,3.90893066980024,3.90203562340967,3.88825949874419,3.87962648556876,3.87723214285714,3.86821705426357,3.84210526315789,3.79238095238095,3.78325123152709,3.69868421052632,3.66829745596869,3.6656976744186,3.66561514195584,3.66349206349206,3.55555555555556,3.5,3.5,3.46774193548387,3.31428571428571,3.28125,3.20833333333333,3,3],"Total Number of Reviews":[768,1,131,105,41,82,21,642,132,2081,153,572,6585,14,9,748,456,1175,1800,1268,362,8166,2014,2006,813,495,283,49,314,1423,77,22,86,355,1625,132,10129,1075,12057,40,3047,8283,2330,19985,1584,9464,686,4146,831,59185,1219,624,36955,812,25131,27709,14889,2251,911,46600,9641,468,3105,14078,948,1003,819,876,11523,5113,20391,112,544,6690,756,707,1583,4350,243,15439,20057,5893,14762,425,498,46704,2596,786,18016,3058,5471,53,585,19875,5094,1396,2638,3110,47,4322,615,1260,7082,1329,16,15121,2345,2051,7754,3899,18184,352,384,1440,286,2111,1626,21516,3039,3116,955,3236,805,8296,2896,3839,13531,4222,25155,2498,18873,7120,2276,301,11841,195,2148,3170,280,3644,2736,391,15386,36259,22331,3946,303,7363,872,8028,7507,1435,579,57840,10180,178,1762,463,2227,2078,95,817,75,1495,7262,456,99,101,6133,1280,26195,261,5087,419,803,2824,4967,360,2047,285,42025,3839,423,883,849,633,2285,2627,2100,26,1438,582,9284,13076,2325,1665,10704,4808,631,21718,536,1260,9434,385,266,7483,2102,5850,942,927,1175,1119,971,4053,76,2675,1609,3723,84,1405,326,191,721,229,111,222,4597,1439,851,1572,37426,2945,224,387,152,525,203,380,511,172,634,315,36,4,223,62,35,32,12,7,7],"Total Number of Loves":[56380,627,7012,11637,2670,5542,1891,32014,25169,305467,13918,14090,353504,4220,2272,14265,48993,55241,92997,280081,33539,438982,33807,80513,43843,16580,18810,2588,7481,49361,8057,4026,12898,11279,102883,11197,253902,34602,718857,4447,48874,758489,53235,392596,114038,191054,45217,372911,31166,2270541,29422,14160,1982986,61730,777410,1427560,921576,342748,19261,739353,493036,38003,190823,863901,34969,73489,53027,69310,468336,294325,552320,10221,29049,301115,103100,41787,140296,204444,18748,866152,1265559,326080,584491,80755,39359,2614726,80329,19689,649230,216473,508136,5578,31966,629208,101732,66555,154016,218161,10152,417753,59257,264375,236318,61850,7839,453715,117901,98221,598225,196906,1299985,51126,31531,120316,25119,115384,141614,1381459,459093,289423,109535,137717,78654,588358,156293,166638,490024,685672,1028694,268176,892708,222556,163199,30841,883690,42917,71407,151495,143970,381118,136377,81128,775046,2470170,967196,300403,11067,1147618,78969,415503,262241,118486,7198,2676124,1172516,14230,88742,132008,137096,145622,14772,13025,8680,81214,347819,25351,28075,7336,401097,212182,1285675,45368,506497,20151,33317,99034,723251,67292,241768,38912,1444656,81191,33111,121028,94256,42454,113108,40505,122781,3263,204680,56853,744503,1685594,203199,51687,483203,232366,30580,1241501,84801,94236,560551,13725,22422,590679,165573,609274,115229,64453,191735,93614,55472,44659,2251,104016,227898,231947,6830,36931,23431,47314,139623,16784,12553,28306,179482,97454,134929,152866,1806684,192253,7453,21625,31473,64025,24734,24824,71830,37568,96434,33589,4541,1605,21649,13049,2512,6205,1178,1750,1124]},"options":{"rownames":false,"brushMode":"1D-axes","brushPredicate":"AND","reorderable":true,"margin":{"top":50,"bottom":50,"left":100,"right":50},"alpha":0.2,"mode":"queue","bundlingStrength":0.5,"smoothness":0,"width":800},"autoresize":false,"tasks":null},"evals":[],"jsHooks":[]}</script>
Most of the brands have ratings in between 4.0 and 4.5, with total number of reivews below 10,000 and total number of Loves below 250,000. Brands with ratings above 4.5 rarely have large number of reviews and Loves as discussed before, but any outlier would be a brand that deserves all the attention.</p>
<p>The biggest take away here: most popular brands are never the best rated ones:)</p>
</div>
<div id="price" class="section level2">
<h2><span class="header-section-number">5.1</span> Price</h2>
<p>Price could influence brands’ ratings in two ways: first, brands with expensive products could be less popular because fewer people could afford it which in turn affect the ratings; second, customers might expect better performance for high-priced products than for cheaper products given similar items.</p>
<p>Below is a histogram of prices on all products in our data set.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">ggplot</span>(sephora, <span class="kw">aes</span>(<span class="dt">x =</span> Prices)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">10</span>, <span class="dt">center =</span> <span class="dv">25</span>, <span class="dt">color =</span> <span class="st">&#39;#7B7B7B&#39;</span>, <span class="dt">fill =</span> <span class="st">&#39;#F0E442&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Price Distribution for All Products&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Prices(USD$)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">        <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb10-8" data-line-number="8">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>), </a>
<a class="sourceLine" id="cb10-9" data-line-number="9">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>), </a>
<a class="sourceLine" id="cb10-10" data-line-number="10">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb10-11" data-line-number="11">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>))</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" />
<br>
Products have a huge range of prices, with the lowest being $1, and highest being $229. More than half of the products are priced between $70 and $160. This is a surprising result as we expected the distribution to be right skewed and more cheap products in the data.</p>
<p>So, does price affect popularity and ratings of brands?</p>
<p>We first investigate the relationship between price and popularity.
We will use average price of all products within a brand as measure of affordability, and again total number of reviews as measure of popularity.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">plot_ly</span>(brand[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, ], <span class="dt">x =</span> <span class="op">~</span>avg_price, <span class="dt">y =</span> <span class="op">~</span>sum_review, <span class="dt">color =</span> <span class="st">&#39;#ff000050&#39;</span>, <span class="dt">text =</span> <span class="op">~</span>Brands, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">add_markers</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw">layout</span>(<span class="dt">title=</span><span class="st">&quot;Top 30 Rated Brands: Total Number of Reviews v.s. Average Prices&quot;</span>,</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">         <span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Brand Average Price&#39;</span>),</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">         <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Total Number of Reviews&#39;</span>))</a></code></pre></div>
<p><div id="htmlwidget-d4f0fc35baa864f84ae0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d4f0fc35baa864f84ae0">{"x":{"visdat":{"27694b6e4cee":["function () ","plotlyVisDat"]},"cur_data":"27694b6e4cee","attrs":{"27694b6e4cee":{"x":{},"y":{},"text":{},"hoverinfo":"text","color":"#ff000050","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Top 30 Rated Brands: Total Number of Reviews v.s. Average Prices","xaxis":{"domain":[0,1],"automargin":true,"title":"Brand Average Price"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Total Number of Reviews"},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[295,320,72.3333333333333,114,166.75,231.888888888889,26,277,102.666666666667,107.083333333333,265.5,204.166666666667,246.333333333333,134,296.666666666667,280.416666666667,186,264.25,313.166666666667,200.916666666667,152.25,229.916666666667,285.114285714286,119.666666666667,259,19.5,368,43,221,88],"y":[768,1,131,105,41,82,21,642,132,2081,153,572,6585,14,9,748,456,1175,1800,1268,362,8166,2014,2006,813,495,283,49,314,1423],"text":["Aether Beauty","Issey Miyake","Valentino","YUNI","Golde","RODIN olio lusso ","Proraso","The 7 Virtues","Tower 28 Beauty","CHANEL","BERDOUES","The Art of Shaving","Shiseido","ReFa","WelleCo","shu uemura","DOMINIQUE COSMETICS","BVLGARI","BURBERRY","Violet Voss","Kilian","belif","Alpha-H","Makeup Eraser","Sand & Sky","BALENCIAGA","Cocofloss","Crushed Tonic","Diamancel","Evian"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","mode":"markers","name":"#ff000050","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
The result seems to be quite diverging; no obvious patterns emerged from the graph. At any price level, the total number of review ranges from 0 to 2500, with the exception of “belif” and “Shiseido”. Also, given any number of reviews, the price range is quite large, too. It is reasonable to assume that price might not be a factor of popularity.</p>
<p>We choose not to use number of Love as an indicator of popularity in this part of analysis because it is more convincing if the customer have accepted the price and bought the product whereas writing a review confirms the action of purchasing the item. Putting the product in Love list might not be as persuasive as buying the product since it is just one click to “Love” the product.</p>
<p>Now the question remain, will price and ratings have a stronger correlation?</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">plot_ly</span>(brand[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, ], <span class="dt">x =</span> <span class="op">~</span>avg_price, <span class="dt">y =</span> <span class="op">~</span>avg_rating, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&#39;#D55E00&#39;</span>), <span class="dt">text =</span> <span class="op">~</span>Brands, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">add_markers</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw">layout</span>(<span class="dt">title=</span><span class="st">&quot;Top 30 Rated Brands: Ratings v.s. Average Prices&quot;</span>,</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">         <span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Brand Average Price&#39;</span>),</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">         <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Ratings&#39;</span>))</a></code></pre></div>
<p><div id="htmlwidget-3fdb130536f7c62ffda4" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3fdb130536f7c62ffda4">{"x":{"visdat":{"2769392460d0":["function () ","plotlyVisDat"]},"cur_data":"2769392460d0","attrs":{"2769392460d0":{"x":{},"y":{},"text":{},"hoverinfo":"text","color":["#D55E00"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Top 30 Rated Brands: Ratings v.s. Average Prices","xaxis":{"domain":[0,1],"automargin":true,"title":"Brand Average Price"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Ratings"},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[295,320,72.3333333333333,114,166.75,231.888888888889,26,277,102.666666666667,107.083333333333,265.5,204.166666666667,246.333333333333,134,296.666666666667,280.416666666667,186,264.25,313.166666666667,200.916666666667,152.25,229.916666666667,285.114285714286,119.666666666667,259,19.5,368,43,221,88],"y":[5,5,4.89312977099237,4.88571428571429,4.84146341463415,4.81707317073171,4.80952380952381,4.73364485981308,4.71969696969697,4.65785679961557,4.65686274509804,4.64510489510489,4.64381169324222,4.64285714285714,4.61111111111111,4.5548128342246,4.53728070175439,4.53446808510638,4.52555555555556,4.50315457413249,4.50276243093923,4.50269409747735,4.50173783515392,4.50149551345962,4.50061500615006,4.5,4.5,4.5,4.5,4.5],"text":["Aether Beauty","Issey Miyake","Valentino","YUNI","Golde","RODIN olio lusso ","Proraso","The 7 Virtues","Tower 28 Beauty","CHANEL","BERDOUES","The Art of Shaving","Shiseido","ReFa","WelleCo","shu uemura","DOMINIQUE COSMETICS","BVLGARI","BURBERRY","Violet Voss","Kilian","belif","Alpha-H","Makeup Eraser","Sand & Sky","BALENCIAGA","Cocofloss","Crushed Tonic","Diamancel","Evian"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","mode":"markers","marker":{"color":"rgba(213,94,0,1)","line":{"color":"rgba(213,94,0,1)"}},"textfont":{"color":"rgba(213,94,0,1)"},"error_y":{"color":"rgba(213,94,0,1)"},"error_x":{"color":"rgba(213,94,0,1)"},"line":{"color":"rgba(213,94,0,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
The plot appears to be more sparce than the last one, and no pattern could be easily detected. It seems that price is not a direct factor on ratings of brands.</p>
<p>We want to look more closely at the price distribution of top-rated brands: it might happen that top-rated brands share a similar pattern regarding price distribution. So we draw the price distribution of products from top 10 rated brands.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">sephora_top10 &lt;-<span class="st"> </span>sephora[<span class="kw">with</span>(sephora, <span class="kw">order</span>(<span class="op">-</span>avg_rating)), ][<span class="dv">1</span><span class="op">:</span><span class="dv">53</span>, ]</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">ggplot</span>(sephora_top10, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(Brands, Prices, median), <span class="dt">y =</span> Prices)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">fill =</span> <span class="st">&quot;#CC79A7&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;#473e2c&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Top 10 Rated Brand v.s. Price Distribution&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Brands&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Price Distribution&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb13-7" data-line-number="7">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>( <span class="dt">color =</span> <span class="st">&quot;#993333&quot;</span>, <span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb13-9" data-line-number="9">        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">        <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb13-12" data-line-number="12">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>), </a>
<a class="sourceLine" id="cb13-13" data-line-number="13">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb13-14" data-line-number="14">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="st">        </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="672" />
<br>
The distributions are quite difference from one and another and they don’t share any common patterns. It is interesting to see that price might not be an important factor to consider any more for customers nowadays to decided whether or not to purchase a product.
At this point, we want to rule out price as a primary factor that could affect the ratings of brands.</p>
</div>
<div id="composition-of-products" class="section level2">
<h2><span class="header-section-number">5.2</span> Composition of Products</h2>
<p>As explained before, we want to know if certain categories of products would naturally have higher ratings than other categories of products, thus brands with top-selling products containing higher-rated categories of products will then have higher ratings in total.
To clarify, the composition of products we defined here means out of the top-selling products we acquired for each brand, how many products come from each category respectively.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">ggplot</span>(cat_data, <span class="kw">aes</span>(avg_rating, <span class="kw">fct_reorder</span>(Categories, avg_rating))) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Average Ratings&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Categories of Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">        </span><span class="kw">ggtitle</span>(<span class="st">&quot;Average Ratings for Each Category of Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="st">        </span><span class="kw">theme_grey</span>(<span class="dv">16</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">        </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb14-6" data-line-number="6">              <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">              <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb14-8" data-line-number="8">              <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">              <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">              <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb14-11" data-line-number="11">              <span class="dt">axis.ticks.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>))</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Out of all observations, “Men” products appears to have highest ratings whereas “Bath &amp; Body” appears to have lowest ratings among all categories. However, we also need to account for volumns of products in each category:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">ggplot</span>(cat_data, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(Categories, sum_review), <span class="dt">y =</span> sum_review<span class="op">/</span><span class="dv">1000</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Categories of Products&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Sum of Reviews in Thousands&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Total Number of Review for Each Category&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb15-6" data-line-number="6">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">        <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">        <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb15-9" data-line-number="9">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>), </a>
<a class="sourceLine" id="cb15-10" data-line-number="10">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb15-11" data-line-number="11">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb15-12" data-line-number="12">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>))</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Since we are calculating average ratings, we need to know how many reviews there are for each category of products. Even though “Men” is best-rated among all categories, it has substantially fewer number of reviews than “Makeup”, “Skincare”, and “Fragrance”. Therefore, it might be trivial to consider “Men” as the best-selling type of product as it contains a lot less data points than the most reviewed categories.</p>
<p>It might be wise to consider the three most reviewed categories for our analysis, which are “Makeup”, “Skincare”, and “Fragrance”. However, they have quite different ratings: “Fragrance” has the highest among the three, and “Makeup” the lowest.</p>
<p>Now let’s compare the compostion of productions for top 10 rated brands and bottom 10 rated brands.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">highest_<span class="dv">10</span> =<span class="st"> </span>cosmetics[cosmetics<span class="op">$</span>Brands <span class="op">%in%</span><span class="st"> </span>high_brands[<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>],]</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">highest_<span class="dv">10</span>_df=highest_<span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(Brands, Categories) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">freq=</span><span class="kw">n</span>())<span class="op">%&gt;%</span><span class="kw">filter</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span>freq<span class="op">/</span><span class="kw">sum</span>(freq))</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="kw">ggplot</span>(highest_<span class="dv">10</span>_df, <span class="kw">aes</span>(<span class="dt">fill =</span> Categories, <span class="dt">y =</span> prop, <span class="dt">x =</span> Brands)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="st">    </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Pastel1&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb16-10" data-line-number="10">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </a>
<a class="sourceLine" id="cb16-11" data-line-number="11">          <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">          <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb16-13" data-line-number="13">          <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb16-14" data-line-number="14">          <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb16-15" data-line-number="15">          <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb16-16" data-line-number="16">          <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Composition of Products for Top 10 Rated Brands&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Brands&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Proportion of Each Category of Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="st">    </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-1.png" width="672" />
<br>
Out of the top 10 rated brands, four of them only sell “Fragrance”, whereas one for “Skincare” and one for “Makeup”. Composition of products might actually influence the ratings of brands: since “Fragrance” has a higher rating in general, it could be that brands which only sell perfumes, or mostly sell perfumes can end up with a higher ratings.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">lowest_<span class="dv">10</span> =<span class="st"> </span>cosmetics[cosmetics<span class="op">$</span>Brands <span class="op">%in%</span><span class="st"> </span>high_brands[<span class="dv">46</span><span class="op">:</span><span class="dv">55</span>],]</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">lowest_<span class="dv">10</span>_df =<span class="st"> </span>lowest_<span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Brands, Categories) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">freq=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop=</span>freq<span class="op">/</span><span class="kw">sum</span>(freq))</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw">ggplot</span>(lowest_<span class="dv">10</span>_df, <span class="kw">aes</span>(<span class="dt">fill =</span> Categories, <span class="dt">y =</span> prop, <span class="dt">x =</span> Brands)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Set3&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>), </a>
<a class="sourceLine" id="cb17-10" data-line-number="10">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">          <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>,</a>
<a class="sourceLine" id="cb17-12" data-line-number="12">          <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>), </a>
<a class="sourceLine" id="cb17-13" data-line-number="13">          <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb17-14" data-line-number="14">          <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb17-15" data-line-number="15">          <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(), </a>
<a class="sourceLine" id="cb17-16" data-line-number="16">          <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Composition of Products for Bottom 10 Rated Brands&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Brands&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Proportion of Each Category of Products&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="st">    </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-19-1.png" width="672" />
<br>
Out of the bottom 10 rated brands, three of them only sell “Skincare”, whereas two for “Makeup” and one for “Fragrance”. Although “Skincare” doesn’t have the lowest rating among the three, 30% of lowest rating brands only sell “Skincare”. Also, highest-rated category “Fragrance” among the three does have lowest number of brands only selling perfumes.</p>
<p>We could make some assumption between composition of products of a brand and its ratings: a brand that sell highest rating categories of products tend to be have higher ratings.</p>
<p>In conclusion, although not very strongly, popularities of a brand and composition of products could potentially influence the ratings of the brand on Sephora. Price might not be an as important as a factor we consider it to be when accessing the performance of a brand.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="missing-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interactive-component.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/YOUR yujie980201/Sephora/edit/master/05-results.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/YOUR GITHUB yujie980201/Sephora/blob/master/05-results.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
